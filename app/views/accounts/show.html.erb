<script>
    $(document).ready(function() {
          $(".network-modal-link").bind("ajax:success",
                   function(evt, data, status, xhr){
                        //this assumes the action returns an HTML snippet
                        $("#network-modal").html(data);
           }
    });
</script>

<p id="notice"><%= notice %></p>

<% content_for :nav_links do %>
<div class="btn-group pull-right">
	<a class="btn dropdown-toggle" href="#" data-toggle="dropdown">
		<i class="icon-user"></i>
		<%= @account.name %>
		<span class="caret"></span>
	</a>
	<ul class="dropdown-menu">
		<li>
			<a href="#">Sign Out</a>
		</li>
	</ul>
</div>
<div class="nav-collapse">
  <ul class="nav pull-right">
    <li><a href="#about">About</a></li>
    <li><a href="#help">Help</a></li>
  </ul>
</div>
<% end %>

<div class="row">
	<div class="span3">
		<div class="well sidebar-nav account-info">
			<h2><%= @account.name %></h2>
			<h3>Id</h3>
			<h4><a data-toggle="modal" href="#myModal" ><%= @account.id %></a></h4>
			<h3>Membership type</h3>
			<h4><%= package_badge_helper %></h4>
		</div>
	</div>
	<div class="span9">
    <ul class="nav nav-tabs">
		  <li class="active"><a href="#overview" data-toggle="pill">Overview</a></li>
		  <li><a href="#commission" data-toggle="pill">Commission Pricing</a></li>
    </ul>
		<div id="overview" class="tab-pane active fade in">
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span6">
						<h3>Generation 1</h3>
						<table class="table network">
							<tr>
								<th>ID</th>
								<th>Earnings</th>
							</tr>
							<% @account.first_generation.each do |item| -%>
								<tr>
									<td>
<%= link_to item.id, user_modal_path(:user_id => item.id), {:remote => true, 'data-toggle' => 'modal', 'data-target' => "#network-modal", :class => 'network-modal-link'} %>
									</td>
									<td>$<%= @account.earnings_from_user item%>.00</td>
								</tr>	
							<% end -%>
						</table>
					</div>
					<div class="span6">
						<h3>Generation 2</h3>
						<table class="table network">
							<tr>
								<th>ID</th>
								<th>Earnings</th>
							</tr>
							<% @account.second_generation.each do |item| -%>
								<tr>
									<td><%= item.id %> </td>
									<td>$<%= @account.earnings_from_user item%>.00</td>
								</tr>	
							<% end -%>
						</table>

					</div>				
				</div>				
			</div>

		</div>
		<div id="commission" class="tab-pane fade">
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span6">
						<h3>Generation 1</h3>
					</div>
					<div class="span6">
						<h3>Generation 2</h3>
					</div>				
				</div>				
			</div>

		</div>
	</div>
</div>
<div class="modal fade" id="myModal">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">Ã—</button>
		<h3><%= @account.name %></h3>
	</div>
	<div class="modal-body">
		<dl class="dl-horizontal">
			<dt>ID:</dt>
			<dd><%= @account.id %>  </dd>
			<dt>Referred by: </dt>
			<dd><%= @account.parent.name %>	(ID: <%= @account.parent.id %>) </dd>
		</dl>

	</div>
</div>

<div class="modal fade" id="network-modal"></div>


			<p>
		</div>
	</div>
</div>


